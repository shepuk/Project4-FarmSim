{% extends "base.html" %}
{% load static %}

{% block content %}

<main class="container">
    <div class="d-flex align-items-center p-3 my-3 text-white bg-green rounded shadow-sm">
        <div class="lh-1">
            <h1 class="h6 mb-0 text-white lh-1">Your Farm</h1>
            <small>Plant, grow and harvest crops.</small>
        </div>
    </div>

    <div class="my-3 p-3 bg-body rounded shadow-sm">
        <h6 class="border-bottom pb-2 mb-0">Your crops</h6>
        <div class="d-flex pt-3 border-bottom">
            <p class="pb-3 mb-0 small lh-sm ">
                <strong class="d-block text-gray-dark">Available spots:</strong>
                999
                <strong class="d-block text-gray-dark">Active crops:</strong>
                999
                <strong class="d-block text-gray-dark">Ready for harvest:</strong>
            </p>
        </div>

        <div class="container field-container">
            <div class="field-background">
                <img src="/media/ui/field.png" alt="">
            </div>

            <div class="plant1">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop1 %}
                <img class="store-image-details" src="{{ farm.crop1.image.url }}" alt="{{ farm.crop1 }}">
                <div class="harvest-time" id="harvest-time">{{ farm.crop1_harvest_time }}</div>
                <div class="harvest-time" id="harvest-time">{{ farm.crop1_plant_time }}</div>
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user  and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop1' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant2">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop2 %}
                <img class="store-image-details" src="{{ farm.crop2.image.url }}" alt="{{ farm.crop2 }}">
                <div class="harvest-time" id="harvest-time">{{ farm.crop2_harvest_time }}</div>
                <div class="harvest-time" id="harvest-time">{{ farm.crop2_plant_time }}</div>
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop2' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant3">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop3 %}
                <img class="store-image-details" src="{{ farm.crop3.image.url }}" alt="{{ farm.crop3 }}">
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop3' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant4">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop4 %}
                <img class="store-image-details" src="{{ farm.crop4.image.url }}" alt="{{ farm.crop4 }}">
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop4' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant5">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop5 %}
                <img class="store-image-details" src="{{ farm.crop5.image.url }}" alt="{{ farm.crop5 }}">
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop5' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant6">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop6 %}
                <img class="store-image-details" src="{{ farm.crop6.image.url }}" alt="{{ farm.crop6 }}">
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop6' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant7">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop7 %}
                <img class="store-image-details" src="{{ farm.crop7.image.url }}" alt="{{ farm.crop7 }}">
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop7' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

            <div class="plant8">
                {% for farm in farms %}
                {% if farm.user == user %}
                {% if farm.crop8 %}
                <img class="store-image-details" src="{{ farm.crop8.image.url }}" alt="{{ farm.crop8 }}">
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Plant
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        {% for item in items %}
                        {% if item.owner == user and item.item.category.name == 'seeds' %}
                        <li>
                            <form class="form store-price"
                                action="{% url 'plant_crop' item=item.item cropslot='crop8' %}" method="POST">
                                {% csrf_token %}
                                <button class="crop-button" type="submit">
                                    {{ item.item }}
                                    ({{item.quantity}})
                                </button>
                                <input type="hidden" name="redirect_url" value="{{ request.path }}">
                            </form>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </div>

        </div>
    </div>
</main>

{% block extra_js %}

{% endblock %}
<script src="{% static 'js/crop-timer.js' %}"></script>
{% endblock %}